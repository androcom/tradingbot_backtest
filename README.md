# Hybrid AI Trading System (Strategy Factory & Lifecycle Manager)

μ΄ ν”„λ΅μ νΈλ” **μ§€λ„ ν•™μµ**(XGBoost + LSTM)μ μμΈ΅λ ¥κ³Ό **μ „λµμ  λ¨λ“ν™”**(Strategy Pattern), κ·Έλ¦¬κ³  **μ™„μ „ μλ™ν™”λ μƒμ• μ£ΌκΈ° κ΄€λ¦¬**(Lifecycle Management)λ¥Ό κ²°ν•©ν• μ§€λ¥ν• ν€€νΈ νΈλ μ΄λ”© μ‹μ¤ν…μ…λ‹λ‹¤.

λ‹¨μν• λ¨λΈ ν•™μµμ„ λ„μ–΄, **'μ‹μ¥ κµ­λ©΄(Regime)'**μ— λ”°λΌ μµμ μ μ „λµ(μ¶”μ„Έ/ν΅λ³΄/λ°©μ–΄)μ„ μ„ νƒν•  μ μλ” κµ¬μ΅°λ¥Ό κ°–μ¶”μ—μΌλ©°, **Model Factory**λ¥Ό ν†µν•΄ νλ‹ $\rightarrow$ ν•™μµ $\rightarrow$ κ²€μ¦ $\rightarrow$ λ°°ν¬μ μ „ κ³Όμ •μ„ μλ™ν™”ν•μ—¬ μ‹μ¤ν…μ μ§€μ†μ μΈ μ°μƒν–¥μ„ λ©ν‘λ΅ ν•©λ‹λ‹¤.

---

## π€ ν•µμ‹¬ κ²½μλ ¥ (Key Features)

### 1. μ „λµ λ¨λ“ν™” λ° ν™•μ¥μ„± (Modular Strategy Architecture)
* **Multi-Strategy Support**: μ‹μ¥ μƒν™©μ— λ”°λΌ μ μ—°ν•κ² λ€μ‘ν•κΈ° μ„ν•΄ μ „λµμ„ λ¨λ“ν™”ν•μ€μµλ‹λ‹¤.
    * `TrendStrategy`: XGB+LSTM μμΈ΅ κΈ°λ°μ μ¶”μ„Έ μ¶”μΆ… + Trailing Stop.
    * `RangeStrategy`: RSI λ° λ³Όλ¦°μ € λ°΄λ“ κΈ°λ°μ λ°•μ¤κ¶ μ—­μ¶”μ„Έ λ§¤λ§¤.
    * `DefenseStrategy`: ν•λ½μ¥ κ°μ§€ μ‹ ν„κΈ λΉ„μ¤‘μ„ λλ¦¬κ³  μ ν¬μ§€μ…λ§ μ ν•μ μΌλ΅ ν—μ©.
* **Standard Interface**: λ¨λ“  μ „λµμ€ `BaseStrategy` κ·κ²©μ„ λ”°λ¥΄λ―€λ΅, μƒλ΅μ΄ μ „λµμ„ μ¶”κ°€ν•κ±°λ‚ κµμ²΄ν•κΈ° λ§¤μ° μ‰½μµλ‹λ‹¤.

### 2. λ¨λΈ κ³µμ¥ λ° μƒμ• μ£ΌκΈ° κ΄€λ¦¬ (Factory & Lifecycle)
* **Automated Model Factory**: λ²„νΌ ν•λ‚λ΅ `λ°μ΄ν„° μμ§‘` $\rightarrow$ `AI λ¨λΈ κµ¬μ΅° νλ‹` $\rightarrow$ `λ§¤λ§¤ λ΅μ§ μµμ ν™”` $\rightarrow$ `μ„±λ¥ κ²€μ¦` ν”„λ΅μ„Έμ¤κ°€ μ›μ¤ν†±μΌλ΅ μ‹¤ν–‰λ©λ‹λ‹¤.
* **Championship System**: μƒλ΅ ν•™μµλ λ¨λΈ(Challenger)κ³Ό κΈ°μ΅΄ μ‹¤μ „ λ¨λΈ(Champion)μ„ λ°±ν…μ¤νΈλ΅ κ²½μμ‹ν‚µλ‹λ‹¤. λ„μ „μκ°€ 5% μ΄μƒ μ°μν•  κ²½μ°μ—λ§ μ±”ν”Όμ–Έμ„ κµμ²΄(Promotion)ν•κ³  μ„¤μ •μ„ μλ™ μ—…λ°μ΄νΈν•©λ‹λ‹¤.
* **ConfigManager**: μµμ ν™”λ νλΌλ―Έν„°(TP/SL, μ§€ν‘ μ„¤μ • λ“±)λ¥Ό JSON νμΌλ΅ μ¤‘μ•™ κ΄€λ¦¬ν•μ—¬, μ‚¬λμ κ°μ… μ—†μ΄ μ‹μ¤ν…μ΄ μ¤μ¤λ΅ μ§„ν™”ν•©λ‹λ‹¤.

### 3. κ³ μ„±λ¥ ν•μ΄λΈλ¦¬λ“ AI (Hybrid Intelligence)
* **Teacher (Trend Predictor)**: XGBoost(μ •ν• λ°μ΄ν„° ν¨ν„΄)μ™€ LSTM(μ‹κ³„μ—΄ νλ¦„)μ„ μ•™μƒλΈ”ν•μ—¬ μƒμΉ/ν•λ½/ν΅λ³΄ ν™•λ¥ μ„ μ •κµν•κ² μμΈ΅ν•©λ‹λ‹¤.
* **Logic Tuner**: AI μμΈ΅κ°’μ΄ μ•„λ¬΄λ¦¬ μΆ‹μ•„λ„ λ§¤λ§¤ κ·μΉ™μ΄ λ‚μλ©΄ μ†μ‹¤μ΄ λ‚©λ‹λ‹¤. `Optuna`λ¥Ό μ‚¬μ©ν•μ—¬ Trailing Gap, μ§„μ… μ„κ³„κ°’, μµμ /μ†μ  λΉ„μ¨μ„ μ‹λ®¬λ μ΄μ… κΈ°λ°μΌλ΅ μ΄κ³ μ† μµμ ν™”ν•©λ‹λ‹¤.

---

## π“‚ μ‹μ¤ν… κµ¬μ΅° (System Structure)

```text
tradingbot/
β”β”€β”€ π“ configs/                 # [μ„¤μ •] μ „λµλ³„ νλΌλ―Έν„° JSON (ConfigManager κ΄€λ¦¬)
β”β”€β”€ π“ core/                    # [ν•µμ‹¬] κ³µν†µ λ¨λ“ (λ°μ΄ν„°, μ ν‹Έ, μƒμ)
β”‚   β”β”€β”€ config_loader.py        # μ„¤μ • νμΌ I/O
β”‚   β”β”€β”€ data_processor.py       # λ°μ΄ν„° μμ§‘ λ° κΈ°μ μ  μ§€ν‘(ADX, RSI λ“±) κ°€κ³µ
β”‚   β””β”€β”€ constants.py            # μ‹μ¤ν… κ³ μ • μƒμ
β”β”€β”€ π“ strategies/              # [λ‘λ‡ 1] λ§¤λ§¤ μ „λµ λ¨λ“ (Logic)
β”‚   β”β”€β”€ base_strategy.py        # μ „λµ μΈν„°νμ΄μ¤
β”‚   β”β”€β”€ trend_strategy.py       # μ¶”μ„Έμ¶”μΆ… μ „λµ
β”‚   β””β”€β”€ range_strategy.py       # ν΅λ³΄μ¥ μ „λµ
β”β”€β”€ π“ execution/               # [λΈν†µ] λ§¤λ§¤ μ‹¤ν–‰ μ—”μ§„
β”‚   β””β”€β”€ trade_engine.py         # μ „λµ μ„ νƒ λ° μ‹¤ν–‰ μ»¨νΈλ΅¤λ¬
β”β”€β”€ π“ learning/                # [λ‘λ‡ 2] AI/RL ν•™μµ (Training)
β”‚   β”β”€β”€ networks.py             # Hybrid Model (XGB+LSTM) κµ¬μ΅°
β”‚   β”β”€β”€ train_worker.py         # λ¨λΈ ν•™μµ μ›μ»¤
β”‚   β””β”€β”€ evaluator.py            # λ¨λΈ μ„±λ¥ ν‰κ°€ λ° λ€κ²° μ‹¬ν
β”β”€β”€ π“ tuning/                  # [μµμ ν™”] Optuna νλ„ (Optimization)
β”‚   β”β”€β”€ model_tuner.py          # AI λ¨λΈ κµ¬μ΅° μµμ ν™”
β”‚   β”β”€β”€ strategy_tuner.py       # λ§¤λ§¤ λ΅μ§(TP/SL) μµμ ν™”
β”‚   β””β”€β”€ rl_tuner.py             # RL νλΌλ―Έν„° μµμ ν™” (Phase 3μ©)
β”β”€β”€ π“ operations/              # [μ΄μ] μλ™ν™” μ¤ν¬λ¦½νΈ
β”‚   β”β”€β”€ model_factory.py        # μ „μ²΄ νμ΄ν”„λΌμΈ κ°€λ™ κ³µμ¥
β”‚   β””β”€β”€ lifecycle_manager.py    # μ±”ν”Όμ–Έ λ¨λΈ κ΄€λ¦¬ λ° μΉκ²©
β””β”€β”€ π“ models_saved/            # ν•™μµλ λ¨λΈ μ €μ¥μ† (Registry ν¬ν•¨)
```

---

## π—ΊοΈ ν”„λ΅μ νΈ λ΅λ“λ§µ (Roadmap)

### β… Phase 1: κΈ°λ° κµ¬μ¶• λ° μ•μ •ν™” (μ™„λ£)
* λ°μ΄ν„° νμ΄ν”„λΌμΈ(Binance Futures) λ° GPU κ°€μ†(Mixed Precision) μ μ©.
* Data Leakage λ°©μ§€(Walk-Forward) λ° ν΄λμ¤ λ¶κ· ν• ν•΄κ²°.

### β… Phase 2: λ¨λ“ν™” λ° μλ™ν™” (μ™„λ£)
* **Strategy Pattern λ„μ…**: Trend/Range/Defense μ „λµ λ¶„λ¦¬ κµ¬ν„.
* **Model Factory κµ¬μ¶•**: νλ‹λ¶€ν„° λ°°ν¬κΉμ§€ μ „ κ³Όμ • μλ™ν™” μ¤ν¬λ¦½νΈ μ™„μ„±.
* **Lifecycle Manager**: λ¨λΈ κ²½μ λ° μλ™ κµμ²΄ μ‹μ¤ν… κµ¬ν„.
* **Tuner κ³ λ„ν™”**: μ „λµλ³„ λ§μ¶¤ν• νλΌλ―Έν„° μµμ ν™”(Optuna) λ° JSON μ—°λ™.

### π” Phase 3: μ§€λ¥ν• κ΄€λ¦¬μ (RL Manager) κµ¬μ¶• (ν„μ¬ μ§„ν–‰ μ¤‘)
* **κ±°μ‹ μ§€ν‘ μ¶”κ°€**: ADX(μ¶”μ„Έκ°•λ„), λ³€λ™μ„± λ“± μ‹μ¥ κµ­λ©΄ νλ‹¨μ© λ°μ΄ν„° μ¶”κ°€.
* **Manager Environment**: λ§¤μ/λ§¤λ„κ°€ μ•„λ‹ **'μ „λµ μ„ νƒ(Select Strategy)'**μ„ ν–‰λ™μΌλ΅ ν•λ” κ°•ν™”ν•™μµ ν™κ²½ κµ¬μ¶•.
* **Meta-RL ν•™μµ**: ν•μ„ μ „λµλ“¤μ„ μ μ¬μ μ†μ— λ°°μΉν•μ—¬ ν¬νΈν΄λ¦¬μ¤ μ•μ •μ„±μ„ λ†’μ΄λ” μƒμ„ κ΄€λ¦¬μ AI κ°λ°.

### π” Phase 4: μ‹¤μ „ ν¬μ… (Live Deployment)
* **Exchange API**: `ccxt`λ¥Ό μ΄μ©ν• μ‹¤μ‹κ°„ μ£Όλ¬Έ μ§‘ν–‰ λ¨λ“(`LiveBot`) κ°λ°.
* **Paper Trading**: λ°”μ΄λ‚Έμ¤ ν…μ¤νΈλ„· μ—°λ™ λ° μ¬λ¦¬ν”Όμ§€/μ²΄κ²° μ¤μ°¨ κ²€μ¦.
* **Safety Guard**: API μ¤λ¥ μ²λ¦¬, μΏ¨λ‹¤μ΄, λΉ„μƒ μ •μ§€(Circuit Breaker) λ΅μ§ νƒ‘μ¬.

---

## β οΈ Disclaimer
λ³Έ ν”„λ΅μ νΈλ” μ•κ³ λ¦¬μ¦ νΈλ μ΄λ”© μ—°κµ¬ λ° ν•™μµ λ©μ μΌλ΅ κ°λ°λμ—μµλ‹λ‹¤. μ‹¤μ  ν¬μλ” λ³ΈμΈμ μ±…μ„ ν•μ— μ‹ μ¤‘ν•κ² μ§„ν–‰ν•΄μ•Ό ν•λ©°, κ°λ°μλ” μ΄ ν”„λ΅κ·Έλ¨ μ‚¬μ©μΌλ΅ μΈν• κΈμ „μ  μ†μ‹¤μ— λ€ν•΄ μ±…μ„μ„ μ§€μ§€ μ•μµλ‹λ‹¤.